<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="./styles/signup.css" />
    <link rel="stylesheet" href="./styles/index.css" />
    <link rel="stylesheet" href="styles/foot.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Bree+Serif&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div id="nav"></div>
    <div class="register-container">
      <div style="margin-top: 0%">
        <h1 id="heading">Register</h1>

        <div id="myForm">
          <form id="register">
            <input id="fname" type="text" placeholder="First name" />
            <input id="lname" type="text" placeholder="Last name" />
            <input id="mob" type="text" placeholder="+91 8210584930" />
            <input id="email" type="email" placeholder="Email" />
            <input
              id="password"
              type="password"
              placeholder="Enter your password"
            />
          </form>
          <div class="Btn">
            <button id="btn1" type="submit">CONTINUE</button>
          </div>
        </div>
      </div>
      <div id="socialIcons">
        <p>
          Already have an account?
          <a style="font-weight: bold; color: #0f2d26" href="login.html"
            >Login</a
          >
        </p>
      </div>
    </div>
  </body>
  <footer>
    <div id="getfooter"></div>
  </footer>
</html>
<script>
  document.getElementById("btn1").addEventListener("click", reg);

async function reg(event){

    try{

        event.preventDefault();

        var reg_data = {
            first_name: document.querySelector("#fname").value,
            last_name: document.querySelector("#lname").value,
            mobile_number: document.querySelector("#mob").value,
            email: document.querySelector("#email").value,
            password: document.querySelector("#password").value,
        };

        reg_data = JSON.stringify(reg_data)
        console.log('reg_data', reg_data);

    }

    catch(e){
        console.log('e', e);
    }

    let regApi = `http://localhost:2345/register`

    let res = await fetch(regApi, {
        method: "POST",
        body: reg_data,
        headers: {
            "Content-Type": 'application/json'
        },
    
    });

    let data = await res.json()
    console.log('data', data);
    window.location = "login.html";
}     
 
</script>
<script type="module">
  import navbar from "./components/navbar.js";

  let cont = document.getElementById("nav");
  cont.innerHTML = navbar();

  let foot = document.querySelector("#getfooter");
  import footer from "./components/footer.js";
  foot.innerHTML = footer();
</script>
<script src="/scripts/login.js"></script>
